<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8"><link rel="icon" href="https://static.jianshukeji.com/highcharts/images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* css 代码  */
    </style>
    <script src="js/highcharts.js"></script>
    <script src="js/exporting.js"></script>
    <script src="js/oldie.js"></script>
    <script src="js/highcharts-zh_CN.js"></script>
    <script src="plugins/jQuery/jquery-2.2.3.min.js"></script>

</head>
<body>
<div id="container" style="min-width:400px;height:400px"></div>
<script>

    //创建服务接口


    //服务接口完毕
    var chart = Highcharts.chart('container', {
        chart: {
            type: 'line',
            events: {
                load: requestData // 图表加载完毕后执行的回调函数
            }
        },
        title: {
            text: '近七日销售总额'
        },
        subtitle: {
            text: '数据来源: pinyougou.com'
        },
        xAxis: {
            categories: []
        },
        yAxis: {
            labels: {
                formatter:function(){
                    if(this.value <=100) {
                        return "第一等级("+this.value+")";
                    }else if(this.value >100 && this.value <=200) {
                        return "第二等级("+this.value+")";
                    }else {
                        return "第三等级("+this.value+")";
                    }
                }
            }
        },
        plotOptions: {
            line: {
                dataLabels: {
                    // 开启数据标签
                    enabled: true
                },
                // 关闭鼠标跟踪，对应的提示框、点击事件会失效
                enableMouseTracking: false
            }
        },
        series: [{
            name: '销售额',
            data: []
        }]
    });


    function requestData() {
        $.ajax({
            url: '../seller/search.do',
            success: function(point) {

                var arr=point
                var date = new Array();

                $.each(arr, function(index,ele){
                    var series = chart.series[0],
                        shift = series.data.length > 20; // 当数据点数量超过 20 个，则指定删除第一个点
                    // 新增点操作
                    //具体的参数详见：https://api.hcharts.cn/highcharts#Series.addPoint
                    chart.series[0].addPoint(ele.total, true, shift);
                    date[index]=ele.date;
                })

                chart.xAxis[0].setCategories(date)


            },
            dataType: "json",
            cache: false
        });
    }

</script>
</body>
</html>